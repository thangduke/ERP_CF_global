<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <!-- Search view -->
        <record id="shelf_material_line_search_view" model="ir.ui.view">
            <field name="name">shelf.material.line.search</field>
            <field name="model">shelf.material.line</field>
            <field name="arch" type="xml">
                <search string="Tìm kiếm vật tư trong kệ">
                    <field name="shelf_id" string="Kệ hàng"/>
                    <filter name="filter_by_shelf" string="Theo kệ" domain="[]" context="{'group_by': 'shelf_id'}"/>
                    <group expand="1" string="Lọc theo Đơn hàng">
                        <filter name="filter_shelf_id" string="Kệ hàng" domain="[]" context="{'group_by': 'shelf_id'}"/>
                    </group>
                    <searchpanel>
                        <field name="stock_id" string="Kho hàng" icon="fa-shopping-cart"  enable_counters="1"
                            options="{'always_loaded': True}"/>
                    </searchpanel>
                </search>
            </field>
        </record>

        <!-- From view 1-->
        <record id="shelf_material_line_form_view" model="ir.ui.view">
            <field name="name">shelf.material.line.form</field>
            <field name="model">shelf.material.line</field>
            <field name="arch" type="xml">
                <form string="Vật tư trong kệ">
                    <!--    <field name="image_128" invisible="1" />
                     
                        <sheet style="max-width: 1400px; margin-left: auto; margin-right: auto;" invisible="not id"  >
                            <field name="avatar_128" invisible="1"/>
                            <field name="make_visible" invisible="1"/>
                            <field name="make_visible2" invisible="1"/>
                            <field name="make_visible3" invisible="1"/>

                            <div class="d-flex text-dark" style="background-color: #f5efff; padding: 15px; display: block; width: 100%; border-radius:7px;">
                                
                                <div class="mr-3" style="display: flex; align-items: center;">
                                    <field name="image_1920" widget="image" options="{'size': [150, 150]}" class="o_circle_avatar" readonly="1"/>
                                </div>
                                
                                <div style="flex-grow: 1; padding-left: 40px; display: flex; align-items: center;">
                                    <div style="flex: 1; text-align: left;">
                                        <h1>
                                            <field name="name" readonly="1"/>
                                        </h1>
                                        <div style="display: flex; align-items: center; ">
                                            <span class="fa fa-heart fa-lg" style="margin-right: 10px; margin-bottom: 3px; color: red;"/>
                                            <field name="full_work_time" style="font-size: 16px; font-weight: 450;" readonly="1"/>
                                        </div>
                                        <div style="display: flex; align-items: center;">
                                            <span class="fa fa-qrcode fa-lg" style="margin-right: 10px; margin-bottom: 3px; "/>
                                            <field name="employee_index" style="color:rgb(82, 98, 170); font-weight: bold; font-size: 16px;" readonly="1"/>
                                        </div>
                                        <div style="display: flex; align-items: center;">
                                            <span class="fa fa-envelope-o fa-lg" style="margin-right: 8px; margin-bottom: 3px; "/>
                                            <field name="work_email" style="font-size: 16px; " readonly="1"/>
                                        </div>
                                        <div style="display: flex; align-items: center;">
                                            <span class="fa fa-phone fa-lg" style="margin-right: 8px; margin-bottom: 3px;"/>
                                            <field name="mobile_phone" style="font-size: 16px; " readonly="1"/>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <notebook class="o_custom_employee3c_form_height_view text-dark">
                                <page name="main_info" string="Thông tin chính">
                                    <div id="o_work_employee_container2" class="d-lg-flex">
                                        <div id="o_work_employee_main2" class="flex-grow-1 pe-lg-3">
                                            <div class="d-flex justify-content-between align-items-center w-100" style="border-bottom: 1px solid #c7c8cc; margin-bottom:10px;">
                                                <span class="m-0" style="font-size:15px; font-weight: bold;">THÔNG TIN CÔNG VIỆC</span>
                                                <div style="margin-right: 10px;" invisible="not make_visible">
                                                    <button name="action_edit_main_info" type="object" class="btn_custom" icon="fa-pencil" title="Chỉnh sửa thông tin công việc"/>
                                                </div>
                                            </div>
                                            <field name="currency_id" invisible="1"/>
                                            <table style='width:100%;' border='0' class="o_employee3c_employee_info_form">
                                                <tr>
                                                    <th style='width:2%; '/>
                                                    <th style='width:32%; '><span >Chức danh</span></th>
                                                    <th style='width:32%; '><span >Phòng ban</span></th>
                                                    <th style='width:34%; '><span >Phân loại nhân sự</span></th>
                                                </tr>
                                                <tr>
                                                    <td />
                                                    <td ><field name="position_title" /></td>
                                                    <td><field name="department_id" readonly="1"/></td>
                                                    <td><field name="employee_type_2" readonly="1"/></td>
                                                </tr>
                                                <tr style="height:20px">
                                                    <td/>
                                                    <td/>
                                                    <td/>
                                                    <td/>
                                                </tr>
                                                <tr>
                                                    <th style='width:2%; '/>
                                                    <th style='width:32%; '><span >Tình trạng làm việc</span></th>
                                                    <th style='width:32%; '><span >Ngày bắt đầu</span></th>
                                                    <th style='width:34%; '><span >Ngày chính thức</span></th>
                                                </tr>
                                                <tr>
                                                    <td />
                                                    <td ><field name="state" style="font-weight: bold; "
                                                                decoration-success="state == 'official' or state == 'probation'"
                                                                decoration-danger="state == 'quit'" decoration-warning="state == 'break'" readonly="1"/></td>
                                                    <td ><field name="start_date" readonly="1" /></td>
                                                    <td ><span invisible="official_date"></span><field name="official_date" readonly="1"/></td>
                                                </tr>
                                                <tr style="height:20px">
                                                    <td />
                                                    <td/>
                                                    <td/>
                                                    <td/>
                                                </tr>
                                            </table>
                                        </div>

                                        <div id="o_employee_right" class="col-lg-4 px-0 ps-lg-3 pe-lg-0">
                                            <div class="d-flex justify-content-between align-items-center w-100" style="border-bottom: 1px solid #c7c8cc; margin-bottom:20px;">
                                                <span class="m-0" style="font-size:15px; font-weight: bold;">QUẢN LÝ</span>
                                                <div style="margin-right: 10px;" invisible="not make_visible">
                                                    <button name="action_change_managers" type="object" class="btn_custom" icon="fa-pencil" title="Thay đổi quản lý"/>
                                                </div>
                                            </div>
                                            <field mode="tree" name="parent_ids" readonly="1" >
                                                <tree class="o_employee3c_name_avatar_list">
                                                    <field name="avatar_name_job" widget="html" readonly="1" />
                                                </tree>
                                            </field>
                                            
                                            <separator string="cấp trên trực tiếp" style='font-size: 16px;'/>
                                            <field name="parent_display" string="" />
                                        </div>
                                    </div>
                                    <hr style="height:2px;"/>
                                    <div class="d-flex justify-content-between align-items-center w-100" style="border-bottom: 1px solid #c7c8cc; margin-bottom:10px;">
                                                <span class="m-0" style="font-size:15px; font-weight: bold;">THÔNG TIN CÁ NHÂN</span>
                                                <div style="margin-right: 10px;" invisible="not make_visible2 and not make_visible">
                                                    <button name="action_edit_extra_info" type="object" class="btn_custom" icon="fa-pencil" title="Chỉnh sửa thông tin cá nhân"/>
                                                </div>
                                            </div>
                                    <table style='width:100%;' border='0' class="o_employee3c_employee_info_form">
                                        <tr>
                                            <th style='width:2%; '/>
                                            <th style='width:30%; '><span >Ngày sinh</span></th>
                                            <th style='width:30%; '><span >Giới tính</span></th>
                                            <th style='width:38%; '><span >Quốc tịch</span></th>
                                        </tr>
                                        <tr>
                                            <td />
                                            <td><field name="birthday" readonly="1"/></td>
                                            <td>
                                                <span class="fa fa-venus" style="margin-right: 8px; color: #ffb6b9" invisible="gender!='female'"/>
                                                <span class="fa fa-mars" style="margin-right: 8px; color: #61b0cf" invisible="gender!='male'"/>
                                                <span class="fa fa-venus-mars" style="margin-right: 8px;" invisible="gender!='other'"/>
                                                <field name="gender" default_focus="1" readonly="1"/>
                                            </td>
                                            <td><field name="nationality" options='{"no_create": True}' readonly="1"/></td>
                                        </tr>
                                        <tr style="height:20px">
                                            <td />
                                            <td/>
                                            <td/>
                                            <td/>
                                        </tr>
                                        <tr>
                                            <th style='width:2%; '/>
                                            <th style='width:30%; '><span >Căn cước công dân</span></th>
                                            <th style='width:30%; '><span >Địa chỉ thường trú</span></th>
                                            <th style='width:38%; '><span >Địa chỉ hiện tại</span></th>
                                        </tr>
                                        <tr>
                                            <td />
                                            <td><span invisible="identification_id"></span><field name="identification_id" readonly="1"/></td>
                                            <td><span invisible="permanent_address"></span><field name="permanent_address" readonly="1"/></td>
                                            <td><span invisible="current_address"></span><field name="current_address" readonly="1"/></td>
                                        </tr>
                                        <tr style="height:20px">
                                            <td />
                                            <td/>
                                            <td/>
                                            <td/>
                                        </tr>
                                    </table>

                                </page>

                                <page string="Tình trạng việc làm" invisible="not (make_visible or make_visible3)">
                                    <div style="display: flex; align-items: center;">
                                        <span invisible="state != 'quit'" class="fa fa-exclamation-circle fa-2x" style="color: red; margin-bottom: 5px;"/>
                                        <span invisible="state != 'break'" class="fa fa-snowflake-o fa-2x" style="color: orange; margin-bottom: 5px;"/>
                                        <span invisible="state != 'official'" class="fa fa-check-circle-o fa-2x" style="color: green; margin-bottom: 5px;"/>
                                        <span invisible="state != 'probation'" class="fa fa-question-circle-o fa-2x" style="color: #8fd14f; margin-bottom: 5px;"/>
                                        <field name="name" style="font-weight: bold; font-size: 18px; padding-left: 8px; padding-right:5px;" readonly="1"/>

                                        <span invisible="state != 'official'" style="color: green; font-size: 16px; margin-bottom: 5px;"> đang làm việc</span>
                                        <span invisible="state != 'probation'" style="color: #8fd14f; font-size: 16px; margin-bottom: 5px;"> đang trong thời gian thử việc</span>
                                        <span invisible="state != 'break'" style="color: orange; font-size: 16px; "> đang tạm nghỉ</span>
                                    </div>
                                    <div style="padding-top: 20px;" invisible="not make_visible">
                                        <button string="Thử việc" special="save" invisible="1" class="btn btn-info ms-2"/>
                                        <button string="Chính thức" special="save" invisible="state !='probation'" class="btn btn-success ms-2"/>
                                        <button string="Kích hoạt tạm nghỉ" type="object" name="action_employee_break" invisible="state=='break' or state=='quit'" class="btn btn-warning ms-2"/>
                                        <button string="Thôi việc nhân sự" type="object" name="action_employee_quit" invisible="state=='quit'" class="btn btn-danger ms-2"/>
                                        <button string="Quay lại làm việc" type="object" name="action_employee_working" invisible="state !='break'" class="btn btn-success ms-2"/>
                                    </div>
                                    <hr style="height: 2px;"/>
                                </page>
                            </notebook>

                        </sheet>
                         
                        <div class="oe_chatter" style="max-width: 80%; margin-right: 0px;">
                            <field name="message_ids"/>
                        </div>
                    -->
                        <sheet style="max-width: 50%; margin-left: auto; margin-right: auto;" >
                            <h1>
                                Thêm Vật tư mới trong kệ
                            </h1>
                            <h7>
                                Vui lòng đảm bảo nhập đầy đủ thông tin như mã vật tư, loại, màu sắc, kích thước, để thuận tiện cho quản lý và định mức sản xuất.
                            </h7>
                            <hr/>
                            <group>
                                <field name="shelf_id" required="1"/>
                            </group>
                            <group>

                                <field name="position" placeholder="Vị trí sử dụng..." style="border: 1px solid #ced4da;"/>
                                <field name="supplier" placeholder="Nhà cung cấp..." style="border: 1px solid #ced4da;"/>
                                <field name="country" placeholder="Quốc gia..." style="border: 1px solid #ced4da;"/>
                                <field name="entry_date" placeholder="Ngày nhập" readonly="1" />
                                <field name="employee_id" widget="many2one_avatar_user" readonly="1" />
                            </group>
                            <group >
                                <group string="Thông tin cơ bản">
                                    <field name="mtr_no"  placeholder="Mã vật tư..." style="border: 1px solid #ced4da;"/>   
                                    <field name="mtr_type"  placeholder="Chọn loại vật tư" style="border: 1px solid #ced4da;"/>
                                    <field name="mtr_name" placeholder="Tên vật tư..." style="border: 1px solid #ced4da;"/>
                                    <field name="mtr_code" placeholder="Mã nội bộ..." style="border: 1px solid #ced4da;"/>
                                    <field name="dimension" placeholder="Kích thước..." style="border: 1px solid #ced4da;"/>
                                   
                                </group>
                                <group string="Thông tin màu sắc">
                                    <field name="color_item" placeholder="Mã màu vật tư..." style="border: 1px solid #ced4da;"/>
                                    <field name="color_name" placeholder="Tên màu..." style="border: 1px solid #ced4da;"/>
                                    <field name="color_set" placeholder="Bộ màu..." style="border: 1px solid #ced4da;"/>
                                    <field name="color_code" placeholder="Mã code màu..." style="border: 1px solid #ced4da;"/>
                                </group>
                            </group>
                            <group>
                                <group string="Số lượng và đơn giá">
                                    <field name="length" placeholder="Chiều dài (m)" style="border: 1px solid #ced4da;"/>
                                    <field name="est_qty" placeholder="Số lượng ước tính" style="border: 1px solid #ced4da;"/>
                                    <field name="act_qty" placeholder="Số lượng thực tế" style="border: 1px solid #ced4da;"/>
                                    <field name="rate" placeholder="Đơn vị đo" style="border: 1px solid #ced4da;"/>
                                    <field name="price" readonly="1"/>
                                </group>
                                <group string="Thông tin giá">
                                    <field name="cif_price" placeholder="Giá CIF..." style="border: 1px solid #ced4da;"/>
                                    <field name="fob_price" placeholder="Giá FOB..." style="border: 1px solid #ced4da;"/>
                                    <field name="exwork_price" placeholder="Giá EXW..." style="border: 1px solid #ced4da;"/>
                                    <field name="total" readonly="1"/>
                                </group>
                            </group>
                            <div style="text-align: right; padding-top: 20px;">
                                <button  special="save" class="btn btn-success " ><i class="fa fa-check" /> Thêm vật tư</button>
                                <span style="color: white; padding-left:15px;"></span>
                                <button special="cancel" class="btn btn-secondary ms-2" ><i class="fa fa-undo" /> Hủy bỏ</button>
                            </div>
                        </sheet>
                    </form>
                </field>
        </record>

        <!-- Tree View 1 mtr_name-->
        <record id="shelf_material_line_tree_view" model="ir.ui.view">
            <field name="name">shelf.material.line.tree</field>
            <field name="model">shelf.material.line</field>
            <field name="arch" type="xml">
                <tree string="Danh sách vật tư trong kệ" >
                <!-- Thông tin vị trí và phân loại -->
                    <field name="position" string="VỊ TRÍ"/>
                    <field name="mtr_type" string="PHÂN LOẠI"/>
                    
                    <!-- Mã và thông tin cơ bản -->
                    <field name="mtr_no" string="MÃ ITEM"/>
                    <field name="mtr_code" string="CODE NHÀ CUNG CẤP"/>
                    <field name="mtr_name" string="TÊN VẬT TƯ"/>
                    
                    <!-- Thông số kỹ thuật -->
                    <field name="dimension" string="KÍCH THƯỚC"/>
                    <field name="color_item" string="KÍ HIỆU"/>
                    <field name="color_name" string="MÀU SẮC"/>
                    <!-- Số lượng ước tính-->
                    <field name="est_qty" string="SL ƯỚC TÍNH" />
                    <field name="act_qty" string="SL THỰC TẾ" />                   
                    <!-- Định mức và đơn vị -->
                    <field name="rate" string="ĐƠN VỊ TÍNH"/>
                    
                    <!-- Thông tin nhà cung cấp -->
                    <field name="supplier" string="NHÀ CUNG CẤP"/>
                    <field name="country" string="NƯỚC XUẤT XỨ"/>
                    
                    <!-- Thông tin giá 
                    <field name="cif_price" string="GIÁ CIF" />
                    <field name="fob_price" string="GIÁ FOB" />
                    <field name="exwork_price" string="GIÁ EXW" />
                    <field name="total" string="TỔNG" sum="Total Amount"/>                    
                     Tổng cộng -->
                </tree>
            </field>
        </record>

        <!-- Action Window 1: Tạo phê duyệt cho người dùng hiện tại -->
        <record id="action_shelf_material_line" model="ir.actions.act_window">
            <field name="name">Danh sách vật tư trong kệ</field>
            <field name="res_model">shelf.material.line</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{'create': True, 'search_default_filter_shelf_id': 1}</field> 
            <field name="search_view_id" ref="shelf_material_line_search_view"/>
        </record>

    </data>    
</odoo>

